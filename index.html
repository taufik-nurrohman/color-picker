<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta content="#000" name="theme-color">
    <meta content="width=device-width" name="viewport">
    <meta content="A simple color picker application written in pure JavaScript, for modern browsers." name="description">
    <title>Color Picker 2.4.4</title>
    <link href="index.min.css" rel="stylesheet">
    <style>
      * {
        box-sizing: border-box;
      }
      :root {
        background: #fff;
        border-top: 4px solid;
        color: #000;
        font: normal normal 16px/1.25 serif;
      }
      a {
        color: #009;
        text-decoration: none;
      }
      a,
      code {
        word-wrap: break-word;
      }
      code {
        font-family: monospace;
        font-size: 80%;
      }
      footer,
      header,
      main,
      nav {
        margin: 0 auto;
        max-width: 700px;
      }
      hr {
        border: 0;
        border-top: 1px dashed;
        color: inherit;
        height: 0;
      }
      pre {
        white-space: pre-wrap;
        word-wrap: break-word;
      }
      pre code {
        background: #eee;
        display: block;
        padding: 1em;
      }
      table {
        width: 100%;
      }
      td,
      th {
        text-align: left;
        vertical-align: top;
      }
      [role='alert'] {
        background: #ffa;
        border: 1px dashed;
        margin-top: 0;
        padding: .75em 1em;
      }
    </style>
  </head>
  <body>
    <p role="alert">Do you like this project? Please support my <a href="https://github.com/mecha-cms">Mecha CMS</a> project too. Thank you!</p>
    <header>
      <h1>Color Picker 2.4.4</h1>
      <p>Color Picker is a simple JavaScript application that aims to provide custom color picker feature to the web with the most basic appearance and usability.</p>
      <hr>
    </header>
    <main>
      <p>It&rsquo;s easy to set-up, has no animation effects, and no color support other than hex color code (you can add your own custom color supports yourself). My purpose in making this application is to provide a JavaScript color picker solution as simple as possible with the most minimal features without requiring any dependency on JavaScript library such as jQuery. Use the available hooks to make your own improvements without having to touch the application core.</p>
      <form method="get" target="_blank">
        <div style="background-image:linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee 100%), linear-gradient(45deg, #eee 25%, #fff 25%, #fff 75%, #eee 75%, #eee 100%);background-size:20px 20px;background-position:0 0, 10px 10px;">
          <p style="margin:0;padding:3em;"><input name="color" type="text" value="#f00"></p>
        </div>
        <p>Set the color to <a href="javascript:void(picker.set(255, 0, 0, 1));">red</a>, <a href="javascript:void(picker.set(0, 255, 0, 1));">green</a>, <a href="javascript:void(picker.set(0, 0, 255, 1));">blue</a>, <a href="javascript:void(picker.set(0, 0, 255, .5));">blue with 50% opacity</a></p>
        <p>Get the color as <a href="javascript:void(alert(JSON.stringify(picker.get())));">raw</a>, <a href="javascript:void(alert(CP.HEX(picker.get())));">hex string</a></p>
        <p><button type="submit">Submit</button></p>
      </form>
      <h2>Features</h2>
      <ul>
        <li>Light-weight, no dependencies.</li>
        <li>Simple <abbr title="Application Programming Interface">API</abbr>. Easy to master.</li>
        <li>Responsive. It tries to place itself inside an area that is visible within the browser window.</li>
        <li>Has alpha channel support by default.</li>
        <li>Its value has been standardized to the RGBA color model. You can convert those data into other color models by creating your own color parser.</li>
      </ul>
      <h2>Usage</h2>
      <h3>Browser</h3>
      <pre><code>&lt;!DOCTYPE html&gt;
&lt;html dir="ltr"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;link href="<a href="index.min.css" target="_blank">./index.min.css</a>" rel="stylesheet"&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;
      &lt;input type="text"&gt;
    &lt;/p&gt;
    &lt;script src="<a href="index.min.js" target="_blank">./index.min.js</a>"&gt;&lt;/script&gt;
    &lt;script&gt;
      const picker = new CP(document.querySelector('input'));
      picker.on('change', function (r, g, b, a) {
          if (1 === a) {
              this.source.value = 'rgb(' + r + ', ' + g + ', ' + b + ')';
          } else {
              this.source.value = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + a + ')';
          }
      });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
      <h3>Node.js</h3>
      <p>Functions and methods in this application are mostly native JavaScript and are intended for use by the browser. Node.js doesn&rsquo;t know about the DOM, so this kind of practice will probably be used more often to build new browser packages than to be used directly in the Node.js server.</p>
      <h4>CommonJS</h4>
      <pre><code>const CP = require('@taufik-nurrohman/color-picker').default;

const picker = new CP(document.querySelector('input'));

picker.on('change', function (r, g, b, a) {
    this.source.value = this.color(r, g, b, a);
});</code></pre>
      <h4>ECMAScript</h4>
      <pre><code>import CP from '@taufik-nurrohman/color-picker';

const picker = new CP(document.querySelector('input'));

picker.on('change', function (r, g, b, a) {
    this.source.value = this.color(r, g, b, a);
});</code></pre>
      <h2>Examples</h2>
      <ul>
        <li><a href="test.html" target="_blank">No Idea?</a></li>
        <li><a href="test/picker.html" target="_blank">Multiple Instances</a></li>
        <li><a href="tweak/picker-color.html" target="_blank">Pre-Defined Color</a></li>
        <li><a href="tweak/live.html" target="_blank">Update Color Picker&rsquo;s Color State on Value Changes</a></li>
        <li>Add Support for CMYK Color Value</li>
        <li><a href="tweak/color.rgba.html" target="_blank">Add Support for RGBA Color Value</a></li>
        <li>Add Support for HSLA Color Value</li>
        <li>Add Support for HWB Color Value</li>
        <li>Add Support for LAB Color Value</li>
        <li>Add Support for LCH Color Value</li>
        <li><a href="tweak/color.name.html" target="_blank">Add Support for &ldquo;Named&rdquo; Color Value</a></li>
        <li><a href="tweak/color.hex.html" target="_blank">Add Support for Short Hex Color Value (e.g. <code>#000</code> instead of <code>#000000</code>)</a></li>
        <li>Automatic Color Mode Detection</li>
        <li><a href="tweak/alpha.html" target="_blank">Disable Alpha Channel Support</a></li>
        <li><a href="tweak/input.html" target="_blank">Disable Native HTML5 Color Picker</a></li>
        <li><a href="tweak/button.html" target="_blank">Show and Hide Color Picker with Buttons</a></li>
        <li><a href="tweak/events.html" target="_blank">Show and Hide Color Picker with Double Click</a></li>
        <li><a href="tweak/close.html" target="_blank">Add Close Button to the Color Picker</a></li>
        <li><a href="tweak/static.html" target="_blank">Static Color Picker</a></li>
        <li><a href="tweak/transition.html" target="_blank">Transition Effects</a></li>
        <li><a href="tweak/replace.html" target="_blank">Replace Text Input with Hidden Input</a></li>
        <li><a href="test/pop.html" target="_blank">Destroy Color Picker</a></li>
        <li><a href="test/fit.html" target="_blank">Auto-Positioned to the Reachable Area in the Document</a></li>
        <li><a href="tweak/picker-view.html" target="_blank">Color Preview in Color Picker</a></li>
        <li><a href="tweak/picker-view-code.html" target="_blank">Color Code to Copy in Color Picker</a></li>
        <li><a href="tweak/scroll.html" target="_blank">Scroll Follow Color Picker</a></li>
        <li><a href="test/size.html" target="_blank">Custom Color Picker Size</a></li>
        <li><a href="tweak/keyboard.html" target="_blank">Add Support for Keyboard Controls</a></li>
      </ul>
      <h2>Settings</h2>
      <pre><code>let picker = new CP(<var>source</var>, <var>color</var> = 'HEX');</code></pre>
      <pre><code>let picker = new CP(<var>source</var>, <var>state</var> = {
        color: 'HEX'
    });</code></pre>
      <table border="1">
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>source</code></td>
            <td>The source element that holds the initial color data.</td>
          </tr>
          <tr>
            <td><code>color</code></td>
            <td>Name of the color parser defined in the <code>CP</code> object.</td>
          </tr>
          <tr>
            <td><code>state</code></td>
            <td>The configuration data.</td>
          </tr>
          <tr>
            <td><code>state.color</code></td>
            <td>Name of the color parser defined in the <code>CP</code> object.</td>
          </tr>
        </tbody>
      </table>
      <h2>Methods and Properties</h2>
      <h3>CP.HEX(color | [r, g, b, a])</h3>
      <p>Hex color converter as the default color string parser. This is the only color mode that this application can parse into a series of RGBA color data. You can add your own color parser later to enhance the existing features.</p>
      <pre><code>console.log(CP.HEX('#ff0')); // &rarr; `[255, 255, 0, 1]`
console.log(CP.HEX([255, 255, 0, 1])); // &rarr; `'#ffff00'`</code></pre>
      <h3>CP.instances</h3>
      <p>Return the color picker instances.</p>
      <pre><code>for (let key in CP.instances) {
    console.log(key);
    console.log(CP.instances[key]);
}</code></pre>
      <h3>CP.state</h3>
      <p>This property stores the initial values of <code>picker.state</code>.</p>
      <pre><code>let picker = new CP(source, {
        foo: ['bar', 'baz', 'qux']
    });

console.log([CP.state, picker.state]);</code></pre>
      <h3>CP.version</h3>
      <p>Return the color picker version.</p>
      <pre><code>let version = CP.version,
    major = version.split('.')[0];

if (+major &lt; 2) {
    // Has no alpha channel support
}</code></pre>
      <h3>picker.color(r, g, b, a)</h3>
      <p>Call current color parser function with a name that is defined in the <code>state.color</code> value.</p>
      <pre><code>// Convert RGB to HEX in the output
picker.on('change', function (r, g, b, a) {
    this.source.value = this.color(r, g, b, a);
});

// The code above is equal to this code
picker.on('change', function (r, g, b, a) {
    this.source.value = CP.HEX([r, g, b, a]);
});</code></pre>
      <h3>picker.current</h3>
      <p>Return the active color picker control panel element.</p>
      <pre><code>picker.on('change', function (r, g, b, a) {
    if (this.current.classList.contains('color-picker:h')) {
        // Is dragging the hue control
    }
});</code></pre>
      <h3>picker.enter(to)</h3>
      <p>Show the color picker panel.</p>
      <pre><code>picker.enter(); // Enter to the `&lt;body&gt;` element
picker.enter(document.querySelector('#foo')); // Enter to a specific container</code></pre>
      <h3>picker.exit()</h3>
      <p>Hide the color picker panel.</p>
      <pre><code>picker.exit();</code></pre>
      <h3>picker.fit([x, y])</h3>
      <p>Set color picker position measured from the window edges.</p>
      <pre><code>picker.enter();
picker.fit([30, 30]);</code></pre>
      <h3>picker.get()</h3>
      <p>Get current color value as a series of RGBA color data.</p>
      <pre><code>console.log(picker.get());</code></pre>
      <h3>picker.pop()</h3>
      <p>Remove custom color picker features from the source element.</p>
      <h3>picker.self</h3>
      <p>Return the color picker element.</p>
      <pre><code>picker.self.style.borderWidth = '4px';</code></pre>
      <h3>picker.set(r, g, b, a)</h3>
      <p>Set source element value and update the color picker&rsquo;s color state.</p>
      <pre><code>// Set color picker&rsquo;s source element value to yellow with 50% opacity
picker.set(255, 255, 0, .5);</code></pre>
      <h3>picker.source</h3>
      <p>Return the color picker source element that holds the initial color value.</p>
      <pre><code>picker.source.addEventListener('click', function () {
    console.log(this.nodeName);
}, false);</code></pre>
      <h3>picker.state</h3>
      <p>Return the modified color picker states.</p>
      <h3>picker.visible</h3>
      <p>Check if color picker panel is visible.</p>
      <pre><code>if (picker.visible) { &hellip; }</code></pre>
      <h2>Color Converters</h2>
      <p>Converters are defined as static methods in the scope of <code>CP</code>. This method accepts two types of input, a color string input and an array of red, green, blue and alpha color data. Every input given to this method will return the opposite version of the input. For example, with the <code>CP.HEX()</code> method, if you put <code>'#ffff00'</code> to the method argument, it will come out as <code>[255, 255, 0, 1]</code> and if you put <code>[255, 255, 0, 1]</code> to the method argument, it will come out as <code>'#ffff00'</code>.</p>
      <p>To make a color converter, be sure to check the input types first before doing the parsing:</p>
      <pre><code>CP.RGB = x =&gt; {
    if ('string' === typeof x) {
        // Use regular expression here to extract color data from the string input
        // and output it as an array of red, green, blue and alpha color data
        return [r, g, b, a];
    }
    // Return the string representation of color if input is an array of color data
    return 'rgba(' + x[0] + ', ' + x[1] + ', ' + x[2] + ', ' + x[3] + ')';
};

console.log(CP.RGB('rgba(255, 255, 0, 1)'));
console.log(CP.RGB([255, 255, 0, 1]));</code></pre>
      <p>To apply it to the application so that the application can <a href="tweak/color.rgba.html" target="_blank">detect RGB color input through the string representation of RGB color</a> given to the input element, set the <code>color</code> state value to <code>'RGB'</code>:</p>
      <pre><code>let picker = new CP(document.querySelector('input'), {
        color: 'RGB'
    });</code></pre>
      <h2>Hooks</h2>
      <table border="1">
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>blur</code></td>
            <td>Adding a <code>blur</code> hook will disable the default blur behavior, that is, to hide the color picker panel.</td>
          </tr>
          <tr>
            <td><code>change</code></td>
            <td>Will be triggered on every color change.</td>
          </tr>
          <tr>
            <td><code>drag</code></td>
            <td>Will be triggered when the color picker control is dragging.</td>
          </tr>
          <tr>
            <td><code>enter</code></td>
            <td>Will be triggered when color picker panel is visible.</td>
          </tr>
          <tr>
            <td><code>exit</code></td>
            <td>Will be triggered when color picker panel is hidden.</td>
          </tr>
          <tr>
            <td><code>fit</code></td>
            <td>Will be triggered when color picker panel is positioned.</td>
          </tr>
          <tr>
            <td><code>focus</code></td>
            <td>Adding a <code>focus</code> hook will disable the default focus behavior, that is, to show the color picker panel.</td>
          </tr>
          <tr>
            <td><code>pop</code></td>
            <td>Will be triggered after <code>picker.pop()</code>.</td>
          </tr>
          <tr>
            <td><code>start</code></td>
            <td>Will be triggered when the color picker control starts dragging.</td>
          </tr>
          <tr>
            <td><code>stop</code></td>
            <td>Will be triggered when the color picker control stops dragging.</td>
          </tr>
        </tbody>
      </table>
      <h3>picker.fire(event, data)</h3>
      <p>Trigger a hook.</p>
      <pre><code>picker.fire('change', [255, 255, 0, .5]);</code></pre>
      <h3>picker.hooks</h3>
      <p>Return the added hooks.</p>
      <pre><code>console.log(picker.hooks);</code></pre>
      <h3>picker.off(event, then)</h3>
      <p>Remove a hook.</p>
      <pre><code>picker.off('change');</code></pre>
      <pre><code>picker.off('change', onChange); // With context</code></pre>
      <h3>picker.on(event, then)</h3>
      <p>Add a new hook.</p>
      <pre><code>picker.on('change', function (r, g, b, a) {
    console.log(this.color(r, g, b, a));
});</code></pre>
      <pre><code>function onChange(r, g, b, a) {
    console.log(this.color(r, g, b, a));
}

picker.on('change', onChange); // With context</code></pre>
      <h2>License</h2>
      <p>Use it for free, pay if you get paid. So, you&rsquo;ve just benefited financially after using this project? It&rsquo;s a good idea to <a href="https://paypal.me/tatautaufik" target="_blank">share a little financial support</a> with this open source project too. Your support will motivate me to do any further development, as well as to provide voluntary support to overcome problems related to this project.</p>
      <p>Thank you! ❤️</p>
    </main>
    <footer>
      <hr>
      <p>&copy; 2022 <a href="/">Taufik Nurrohman</a></p>
    </footer>
    <script src="index.min.js"></script>
    <script>
      let source = document.forms[0].color;
      source.value = '#' + ('00000' + (Math.random() * (1 << 24) | 0).toString(16)).slice(-6); // Random hex color
      const picker = new CP(source);
      picker.on('change', function (r, g, b, a) {
          this.source.value = this.color(r, g, b, a);
          this.source.parentNode.style.backgroundColor = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + a + ')';
      });
    </script>
  </body>
</html>